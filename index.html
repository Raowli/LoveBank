<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;LoveBank&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body { font-family: -apple-system, system-ui; background: #fff5f7; margin: 0; padding: 20px; color: #333; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card { background: white; padding: 20px; borderRadius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.score { font-size: 48px; font-weight: bold; color: #ff4d6d; text-align: center; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #eee; border-radius: 10px; box-sizing: border-box; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn { padding: 15px; border-radius: 10px; border: none; color: white; font-weight: bold; width: 48%; cursor: pointer; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.pos { background: #4caf50; } .neg { background: #f44336; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.log-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding: 10px 0; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.approve-btn { background: #ff4d6d; color: white; border: none; padding: 5px 10px; border-radius: 5px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div style="text-align:center; font-size:12px; color:#ff4d6d"&gt;SHARED BALANCE&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="balance" class="score"&gt;0&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input type="text" id="note" placeholder="What happened?"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div style="display:flex; justify-content:space-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn pos" onclick="addAct(50)"&gt;+ Good&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn neg" onclick="addAct(-50)"&gt;- Slip&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="logs"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// PASTE YOUR SUPABASE PROJECT DETAILS HERE</p>
<p class="p1"><span class="Apple-converted-space">        </span>const SUPABASE_URL = 'https://zqcevjiowfcghtcjnzex.supabase.co';</p>
<p class="p1"><span class="Apple-converted-space">        </span>const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpxY2V2amlvd2ZjZ2h0Y2puemV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3ODY3MzAsImV4cCI6MjA4MzM2MjczMH0.mkUS7Q8JMhFtJGFZ0_ceK7bVLdYyX9uMbPr3SBIWxBo';</p>
<p class="p1"><span class="Apple-converted-space">        </span>const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function loadData() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const { data, error } = await supabase.from('lovebank').select('*').order('created_at', { ascending: false });</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>let total = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let html = '';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>data.forEach(item =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (item.status === 'approved') total += item.points;</p>
<p class="p1"><span class="Apple-converted-space">                </span>html += `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="log-item"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;b&gt;${item.act}&lt;/b&gt;&lt;br&gt;&lt;small&gt;${new Date(item.created_at).toLocaleTimeString()}&lt;/small&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>${item.status === 'pending'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>? `&lt;button class="approve-btn" onclick="approve('${item.id}')"&gt;Confirm ${item.points}&lt;/button&gt;`<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>: `&lt;b&gt;${item.points &gt; 0 ? '+' : ''}${item.points}&lt;/b&gt;`}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('balance').innerText = total;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('logs').innerHTML = html;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function addAct(pts) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const act = document.getElementById('note').value || "Manual Entry";</p>
<p class="p1"><span class="Apple-converted-space">            </span>await supabase.from('lovebank').insert([{ act, points: pts, status: 'pending' }]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('note').value = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>loadData();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function approve(id) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>await supabase.from('lovebank').update({ status: 'approved' }).eq('id', id);</p>
<p class="p1"><span class="Apple-converted-space">            </span>loadData();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Auto-refresh every 5 seconds</p>
<p class="p1"><span class="Apple-converted-space">        </span>setInterval(loadData, 5000);</p>
<p class="p1"><span class="Apple-converted-space">        </span>loadData();</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
